{"componentChunkName":"component---node-modules-gatsby-plugin-bluewings-src-templates-post-query-js","path":"/en/thanos-explained/","result":{"data":{"site":{"siteMetadata":{"title":[["ko","아빠는 개발자"],["en","Dev Dad"]],"social":[{"name":"GitHub","url":"https://github.com/bluewings"},{"name":"GitHub","url":"https://github.com/gatsbyjs"}]}},"blogPost":{"id":"2398d266-856d-58c2-a418-ac2576ccd03a","excerpt":"With the release of Avengers: Endgame (2019), Google added an Easter Egg to its search results page. When you search for Thanos on Google…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Thanos Easter Egg, How it works\",\n  \"date\": \"2019-05-10T14:34:36.458Z\",\n  \"max_width\": \"58rem\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Bluewings.Row, null, mdx(Bluewings.Column, {\n    args: [],\n    layoutFixed: false,\n    xs: undefined,\n    style: {}\n  }, mdx(\"p\", null, \"With the release of Avengers: Endgame (2019), Google added an Easter Egg to its search results page. When you search for Thanos on Google, you will see an Infinity Gauntlet icon on the right, and when you click on it, half of the search results disappear into the dust.\"), mdx(\"p\", null, \"My son sees Easter Egg and asks, \\u201CDad, Can you do that?\\u201D I said, \\u201CMaybe?\\u201D But I do not have any idea how to implement it. After all, Using browser\\u2019s developer tools, I looked at how it works. Easter Egg was expected to be complex, but was implemented in a very simple way, contrary to my expectation.\"), mdx(\"p\", null, \"To view the demo, click on the Infinity Guntlet on the right.\")), mdx(Bluewings.Column, {\n    args: [],\n    layoutFixed: false,\n    xs: undefined,\n    style: {}\n  }, mdx(Example, {\n    mdxType: \"Example\"\n  }))), mdx(\"hr\", null), mdx(\"p\", null, \"Web pages turn into dust in three steps below.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Capture the screenshot\"), \": Capture screenshot of original element using the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://html2canvas.hertzen.com/\"\n  }), \"html2canvas\"), \" library.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Split into multiple layers\"), \": Create an \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" instance of the same size as the original, and get the data from each pixel of the original screenshot and move it to any \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" instance. After \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" is reflected, update it on each \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"canvas\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Rotate and move layers\"), \": Rotate each \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"canvas\"), \" layer at any angle and adjust the opacity to gradually become invisible.\")), mdx(\"hr\", null), mdx(\"p\", null, \"Let\\u2019s take a step-by-step look at the example along with the code.\"), mdx(Bluewings.DataProvider, null, mdx(Bluewings.Row, null, mdx(Bluewings.Column, {\n    args: [],\n    layoutFixed: false,\n    xs: undefined,\n    style: {\n      \"overflow\": \"auto\"\n    }\n  }, mdx(\"section\", {\n    className: \"step\",\n    style: {}\n  }, mdx(\"h2\", {\n    \"id\": \"1-capture-the-screenshot\"\n  }, \"1. Capture the screenshot\"), mdx(\"p\", null, \"The example on the right is written with the following HTML code.\"), mdx(Context, {\n    mdxType: \"Context\"\n  }, function (_ref2) {\n    var value = _ref2.value;\n    return mdx(Code, {\n      codeString: value.html || '',\n      language: \"html\",\n      mdxType: \"Code\"\n    });\n  }), mdx(\"p\", null, \"For the next step, you need to convert the element with the HTML hierarchy to an image. And you can use the \", \"[html2canvas]\", \" (\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://html2canvas.hertzen.com/\"\n  }), \"https://html2canvas.hertzen.com/\"), \") library to get a screenshot of a specific HTML element.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import html2canvas from 'html2canvas';\\n\\nhtml2canvas(element, {\\n  backgroundColor: null,\\n}).then((canvas) => {\\n  // doSomething(canvas);\\n});\\n\"))), mdx(\"section\", {\n    className: \"step\",\n    \"data-stage\": \"capture\",\n    style: {}\n  }, mdx(\"p\", null, \"Run the above code to create a screenshot of the target element. (click)\"))), mdx(Bluewings.Column, {\n    args: [],\n    layoutFixed: false,\n    xs: undefined,\n    style: {}\n  }, mdx(Context, {\n    mdxType: \"Context\"\n  }, function (_ref3) {\n    var setValue = _ref3.setValue;\n\n    var handleScreenshotCapture = function handleScreenshotCapture(canvas) {\n      if (canvas) {\n        setValue('screenshot', canvas);\n      }\n    };\n\n    var handleSampleLoad = function handleSampleLoad(html) {\n      setValue('html', html);\n    };\n\n    return mdx(\"div\", {\n      style: {\n        position: 'sticky',\n        top: 0\n      }\n    }, mdx(Scrollama, {\n      step: \".step\",\n      offset: \"0.5\",\n      progress: true,\n      mdxType: \"Scrollama\"\n    }, function (_ref4) {\n      var index_ = _ref4.index_;\n      return mdx(\"div\", null, mdx(Sample, {\n        type: \"text\",\n        capture: index_ > 0,\n        onCapture: handleScreenshotCapture,\n        onLoad: handleSampleLoad,\n        mdxType: \"Sample\"\n      }));\n    }));\n  }))), mdx(Bluewings.Row, null, mdx(Bluewings.Column, {\n    args: [],\n    layoutFixed: true,\n    xs: undefined,\n    style: {}\n  }, mdx(\"h2\", {\n    \"id\": \"2-split-into-multiple-layers\"\n  }, \"2. Split into multiple layers\"), mdx(\"p\", null, \"At this stage, each pixel of the original screenshot is randomly divided into several \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"canvases\"), \".\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"Canvas\"), \" uses the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" interface to represent pixel data in the area.  In each of the steps below, we will create, read, and move \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \".\"), mdx(\"section\", {\n    className: \"step\",\n    \"data-stage\": \"create-image-data\",\n    style: {}\n  }, mdx(\"h3\", {\n    \"id\": \"create-an-imagedata-instance-of-the-same-size-as-the-original\"\n  }, \"Create an ImageData instance of the same size as the original.\"), mdx(\"p\", null, \"Use the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/createImageData\"\n  }), \"createImageData\"), \" function to create a set number of empty \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" of the same size as the original.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const ctx = canvas.getContext('2d');\\nconst width = canvas.width;\\nconst height = canvas.height;\\n\\nconst layers = new Array(numOfLayers)\\n  .fill(null)\\n  .map(() => ctx.createImageData(width, height));\\n\"))), mdx(\"section\", {\n    className: \"step\",\n    \"data-stage\": \"move-image-data\",\n    style: {}\n  }, mdx(\"h3\", {\n    \"id\": \"get-imagedata-for-each-pixel-in-the-original-screenshot-and-move-it-to-any-imagedata-instance\"\n  }, \"Get ImageData for each pixel in the original screenshot and move it to any ImageData instance.\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/getImageData\"\n  }), \"getImageData\"), \" function gets the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" of the original screenshot, then traverses all the pixels and moves each pixel\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" randomly to any \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" instance.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const imageData = ctx.getImageData(0, 0, width, height);\\nfor (let x = 0; x < width; x += 1) {\\n  for (let y = 0; y < height; y += 1) {\\n    const i = Math.floor(\\n      (numOfLayers * (Math.random() + (2 * x) / width)) / 3,\\n    );\\n    const p = 4 * (y * width + x);\\n    for (let j = 0; j < 4; j += 1) {\\n      layers[i].data[p + j] = imageData.data[p + j];\\n    }\\n  }\\n}\\n\"))), mdx(\"section\", {\n    className: \"step\",\n    \"data-stage\": \"overlap-canvases\",\n    style: {\n      \"minHeight\": \"50vh\"\n    }\n  }, mdx(\"h3\", {\n    \"id\": \"after-all-imagedata-is-reflected-update-on-each-canvas\"\n  }, \"After all ImageData is reflected, update on each canvas.\"), mdx(\"p\", null, \"When all \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \" is ready, create a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"canvas\"), \" and draw a image using that \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/API/ImageData\"\n  }), \"ImageData\"), \". Pixels are scattered in each \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"canvas\"), \" layer, but they are not much different from the original in layering.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"layers.map((layer) => {\\n  const clone = canvas.cloneNode();\\n  clone.getContext('2d').putImageData(layer, 0, 0);\\n  return clone;\\n});\\n\"))), mdx(\"section\", {\n    style: {}\n  }, mdx(\"h2\", {\n    \"id\": \"3-rotate-and-move-layers\"\n  }, \"3. Rotate and move layers\")), mdx(\"section\", {\n    className: \"step\",\n    \"data-stage\": \"rotate-and-fade-out\",\n    style: {\n      \"minHeight\": \"300px\"\n    }\n  }, mdx(\"p\", null, \"When the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/HTML/Canvas\"\n  }), \"canvas\"), \" layer is ready, the effect is completed by using the css \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/CSS/transform\"\n  }), \"transform\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/docs/Web/CSS/opacity\"\n  }), \"opacity\"), \" to rotate each layer sequentially at any angle and make it transparent.\"))), mdx(Bluewings.Column, {\n    args: [],\n    layoutFixed: false,\n    xs: undefined,\n    style: {}\n  }, mdx(Context, {\n    mdxType: \"Context\"\n  }, function (_ref5) {\n    var value = _ref5.value;\n    return mdx(\"div\", {\n      style: {\n        position: 'sticky',\n        top: 0\n      }\n    }, mdx(Scrollama, {\n      step: \".step\",\n      offset: \"0.5\",\n      progress: true,\n      debug: true,\n      mdxType: \"Scrollama\"\n    }, function (_ref6) {\n      var index_ = _ref6.index_,\n          stage = _ref6.stage,\n          progress = _ref6.stageProgress;\n      return value.screenshot && mdx(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          minHeight: '100vh',\n          justifyContent: 'center'\n        }\n      }, mdx(Gimmick, {\n        show: index_ > 0,\n        screenshot: value.screenshot,\n        stage: stage,\n        progress: progress,\n        mdxType: \"Gimmick\"\n      }));\n    }));\n  }))), mdx(Example2, {\n    mdxType: \"Example2\"\n  }, mdx(\"h1\", null, \"THE END\"))));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/en/thanos-explained/","title":"Thanos Easter Egg, How it works","tags":[],"keywords":[],"date":"May 10, 2019","fields":{"langKey":"en","filePath":"/content/posts/thanos-explained/index.en.mdx"},"parent":{"__typename":"Mdx","frontmatter":{"max_width":"58rem"}}},"previous":null,"next":{"id":"1ad9568f-7df2-5237-b014-d150f2b8b0e8","excerpt":"Google Fonts + 한국어  site has some amazing typographic effects. Some of them can't be implemented with CSS alone, so I wanted to make them…","slug":"/en/playing-with-fonts/","title":"Playing with Fonts","date":"June 23, 2019"}},"pageContext":{"id":"2398d266-856d-58c2-a418-ac2576ccd03a","nextId":"1ad9568f-7df2-5237-b014-d150f2b8b0e8","translations":[{"origin":"/thanos-explained/","slug":"/en/thanos-explained/","langKey":"en"},{"origin":"/thanos-explained/","slug":"/thanos-explained/","langKey":"ko"}],"editOnGithub":"https://github.com/bluewings/dev-dad/edit/master","disqusShortname":"dev-dad","langKey":"en","langKeyDefault":"ko"}}}